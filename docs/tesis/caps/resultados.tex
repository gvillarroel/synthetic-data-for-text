\chapter{Resultados}
En este proyecto, se han generado datos sintéticos a través de diferentes preprocesamientos y modelos de machine learning. Los resultados obtenidos se presentan en términos de desempeño de los modelos entrenados con los datos sintéticos, así como en términos de similitud, privacidad y utilidad de los datos generados.

Es importante tener en cuenta que los resultados son específicos para cada conjunto de datos y modelo utilizado. Por lo tanto, se proporciona una descripción detallada de los resultados para cada caso. Esto permitirá una mejor comprensión de la eficacia de los diferentes métodos utilizados para generar datos sintéticos y cómo se comparan con los datos reales.

\newpage
\section{King County}

\subsection{Reportes}

\subsubsection{Scores}

La Tabla \ref{table-score-king county-a-1} muestra los scores obtenidos para diferentes modelos utilizados en el proyecto. Como se puede apreciar, los modelos con puntajes más altos, como tddpm\_mlp y smote-enc, tienen un mayor parecido con el conjunto real. En cambio, los modelos con puntajes más bajos, como ctgan, tienen una similitud muy baja con los datos reales.

\input{datasets/kingcounty-a-1/tables/table-score-king county-a-1.tex}

Si bien los modelos TDDPM y SMOTE consiguen buenos puntajes en general, hay una diferencia significativa entre ellos en términos de cobertura y límites. SMOTE no cubre la diversidad del conjunto de datos, lo que se refleja en su puntaje de cobertura \emph{(Coverage)}, que es mucho menor que el de TDDPM, así como en su puntaje de límites \emph{(Boundaries)}.
\newpage
\subsubsection{Correlación pairwise}
Este resultado se puede apreciar en el Anexo \fullref{A-pairwise}, donde se muestran las diferencias entre los datos reales y los datos generados por cada modelo. Se puede observar que, en general, los modelos con puntajes más altos tienen una mayor similitud visual con los datos reales. Por ejemplo, las imágenes \fullref{pairwise-king county-a-1-copulagan} y \fullref{pairwise-king county-a-1-gaussiancopula} muestran la comparación entre los datos reales y los datos generados por los modelos gaussiancopula y copulagan. A pesar de que estos modelos tienen puntajes similares, el modelo gaussiancopula tiene una mayor similitud visual con los datos reales que el modelo copulagan.

\input{datasets/kingcounty-a-1/pairwise/pairwise-king county-a-1-copulagan.tex}

\input{datasets/kingcounty-a-1/pairwise/pairwise-king county-a-1-gaussiancopula.tex}

\newpage 
Es importante destacar que, entre los modelos con puntajes superiores al 90\%, puede ser difícil evaluar visualmente cuál es el mejor. Esto se debe a que, a medida que el puntaje aumenta, la similitud visual entre los datos reales y los datos generados también aumenta. Esto se puede observar en las figuras \fullref{pairwise-king county-a-1-smote-enc} y \fullref{pairwise-king county-a-1-tddpm_mlp}, donde se comparan los datos reales con los datos generados por los modelos smote-enc y tddpm\_mlp, respectivamente. Ambos modelos tienen puntajes superiores al 90\%, y la similitud visual entre los datos reales y los datos generados es muy alta en ambos casos.

\input{datasets/kingcounty-a-1/pairwise/pairwise-king county-a-1-smote-enc.tex}

\input{datasets/kingcounty-a-1/pairwise/pairwise-king county-a-1-tddpm_mlp.tex}

En la evaluación de SDMetrics y en la comparación visual utilizando la correlación de Wise, los mejores modelos encontrados son TDDPM y SMOTE. Estos modelos han obtenido los puntajes más altos en ambas métricas y también se han demostrado tener una mayor similitud visual con los datos reales. Por lo tanto, se puede concluir que estos modelos son los más efectivos para generar datos sintéticos útiles para este conjunto de datos específico.

\newpage
\subsubsection{Revisión de Columnas}
La \fullref{table-coverage-king county-a-1} muestra la superioridad del modelo TDDPM al cubrir los diferentes valores en general, aunque existen casos en los que ambos modelos fallan en cubrir los valores. Por ejemplo, en las columnas de \emph{bathrooms} o \emph{bedrooms}, donde TDDPM solo sobrepasa el 70\% de cobertura, pero aún así es mejor que SMOTE. En cambio, SMOTE tiene algunos campos que solo alcanzan un 40\% de cobertura.

\input{datasets/kingcounty-a-1/tables/table-coverage-king county-a-1.tex}

\newpage
En general, la distribución en ambos modelos es cercana a la real, en casi todos los casos por encima del 90\%. La única excepción es SMOTE en \emph{bathrooms}.

\input{datasets/kingcounty-a-1/tables/table-shape-king county-a-1.tex}

\newpage

%En la revisión por columnas de los conjuntos de datos completos, como se puede observar en la lista \fullref{A-kingcounty-top2}, se aprecia una similitud entre los tres conjuntos analizados: Real, Smote y TDDPM. Sin embargo, existen diferencias notables entre ellos. Cabe destacar que los datos generados son alrededor de un 20\% más grandes que el conjunto real.

En varias columnas, la distribución entre los tres conjuntos es similar, como es el caso de bathrooms, sqft\_lot, sqft\_above, price, sqft\_living, sqft\_basement, yr\_built, sqft\_living15 y grade. En \fullref{frecuency-top2-grade} muestra un ejemplo de esto.

\input{datasets/kingcounty-a-1/top2/frecuency-top2-grade.tex}


\newpage
La distribución de los campos bedrooms, condition, view y floors contiene más elementos menos frecuentes en el conjunto de datos generado por el modelo TDDPM. Por ejemplo, en \fullref{frecuency-top2-bedrooms} se puede observar que en la columna \emph{bedrooms} la distribución de valores en el conjunto TDDPM es distinta a SMOTE. Presenta más registros en valor 6 y 1.


\input{datasets/kingcounty-a-1/top2/frecuency-top2-bedrooms.tex}

\newpage
En contraste, en el caso de la columna \emph{sqft\_lot15}, el modelo SMOTE tiene una distribución más cercana a la del conjunto real. Esto se puede observar en \fullref{frecuency-top2-sqft lot15}.

\input{datasets/kingcounty-a-1/top2/frecuency-top2-sqft lot15.tex}

\newpage
\subsubsection{Privacidad}
En el análisis de los registros más cercanos entre los conjuntos reales usados para entrenamiento, los generados por los modelos y el conjunto real almacenado, se presentan sus distancias en la tabla.
DCR2

\input{datasets/kingcounty-a-1/tables/table-dcr-king county-a-1.tex}

En la \fullref{frecuency-top2-privacy} solo se consideran los modelos TDDPM y SMOTE para su comparación. Se ve que en ambos casos existe una distancia mayor a cero, pero que en el caso de TDDPM es mayor, por lo que se considera que es un mejor conjunto en términos de privacidad.

\input{datasets/kingcounty-a-1/top2/frecuency-top2-privacy.tex}


\newpage
\section{Economicos}
El conjunto de economicos, a diferencia de kingcounty que fue filtrado y preprocesado para evitar valores nulos. Este dataset economicos.cl contiene nulos. A continuación se mostrará dos tipos de tratamientos de los elementos nulos. El primero simplemente quita todos los registros que contiene un registro vacio con dropna, se muestra en Código \fullref{codigo-remove-nan}, se considerará \fullref{ds-conjunto-a}. El Código \fullref{codigo-replace-nan} se considerará \fullref{ds-conjunto-b}.


\begin{listing}[H]
    \begin{minted}[linenos=true,frame=lines,framesep=2mm,baselinestretch=1.2]{python}
df_converted = df.dropna().astype({k: 'str' for k in ("description", "price", "title", "address", "owner",)})
basedate = pd.Timestamp('2017-12-01')
dtime = df_converted.pop("publication_date")
df_converted["publication_date"] = dtime.apply(lambda x: (x - basedate).days)
    \end{minted}
\caption{Eliminación de valores nulos en el conjunto de datos de Económicos}
\label{codigo-remove-nan}
\end{listing}

\begin{listing}[H]
    \begin{minted}[linenos=true,frame=lines,framesep=2mm,baselinestretch=1.2]{python}
df_converted = df.fillna(dict(
            property_type = "None",
            transaction_type = "None",
            state = "None",
            county = "None",
            rooms = -1,
            bathrooms = -1,
            m_built = -1,
            m_size = -1,
            source = "None"
    )).fillna(-1).astype({k: 'str' for k in ("description", "price", "title", "address", "owner",)})
basedate = pd.Timestamp('2017-12-01')
dtime = df_converted.pop("publication_date")
df_converted["publication_date"] = dtime.apply(lambda x: (x - basedate).days)
    \end{minted}
\caption{Reemplazo de valores nulos en el conjunto de datos de Económicos}
\label{codigo-replace-nan}
\end{listing}

\subsubsection{Conjunto A}
\label{ds-conjunto-a}

%\begin{table}[H]
%    \centering
%    \caption{Scores DCR sin nulos}
%    \label{dcr-eco-a-scores2}
%    \begin{tabular}{lllllrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr}
%        & name & top5 & top5\_freq & top5\_prob & is\_categorical & nobs & missing & mean & std\_err & upper\_ci & lower\_ci & std & iqr & iqr\_normal & mad & mad\_normal & coef\_var & range & max & min & skew & kurtosis & jarque\_bera & jarque\_bera\_pval & mode & mode\_freq & median & 0.1% & 1.0% & 5.0% & 25.0% & 75.0% & 95.0% & 99.0% & 99.9% \\
%       0 & m\_size & [5000.   50.   60.  200.   70.] & [601 342 321 285 281] & [0.02724512 0.01550388 0.01455188 0.0129199  0.01273856] & False & 22059.000000 & 0.000000 & 146269.353488 & 105454.123661 & 352955.637885 & -60416.930908 & 15662333.864910 & 340.500000 & 252.413028 & 290634.769396 & 364256.665279 & 107.078711 & 2241000000.000000 & 2241000000.000000 & 0.000000 & 134.762058 & 19052.885006 & 333615501598.613220 & 0.000000 & 5000.000000 & 0.027245 & 145.000000 & 2.000000 & 22.000000 & 35.000000 & 66.000000 & 406.500000 & 5000.000000 & 10200.000000 & 70000.000000 \\
%       3 & m\_built & [140.  60. 120.  50.  70.] & [700 467 444 431 415] & [0.03173308 0.0211705  0.02012784 0.01953851 0.01881318] & False & 22059.000000 & 0.000000 & 1771.336159 & 664.364677 & 3073.466999 & 469.205319 & 98673.252621 & 140.000000 & 103.782155 & 3201.642247 & 4012.663491 & 55.705549 & 11999999.000000 & 12000000.000000 & 1.000000 & 96.077796 & 10658.885634 & 104398649894.541122 & 0.000000 & 140.000000 & 0.031733 & 107.000000 & 2.000000 & 23.000000 & 33.000000 & 60.000000 & 200.000000 & 490.000000 & 1200.000000 & 37946.564000 \\
%       7 & publication\_date & [1545 1693 1546 1549  721] & [10883  6103   895   320   125] & [0.49335872 0.27666712 0.04057301 0.01450655 0.00566662] & False & 22059.000000 & 0.000000 & 1470.755338 & 2.056273 & 1474.785560 & 1466.725116 & 305.403340 & 148.000000 & 109.712564 & 206.754513 & 259.128354 & 0.207651 & 1489.000000 & 1693.000000 & 204.000000 & -2.019239 & 5.892322 & 22679.245743 & 0.000000 & 1545.000000 & 0.493359 & 1545.000000 & 450.696000 & 531.000000 & 628.900000 & 1545.000000 & 1693.000000 & 1693.000000 & 1693.000000 & 1693.000000 \\
%       9 & \_price & [12500. 10500. 11500.  8500.  9000.] & [104  99  91  86  85] & [0.00471463 0.00448796 0.0041253  0.00389864 0.0038533 ] & False & 22059.000000 & 0.000000 & 110378.900259 & 32745.675510 & 174559.244908 & 46198.555609 & 4863476.976221 & 9959.233916 & 7382.791149 & 202281.355744 & 253522.082870 & 44.061655 & 390000000.000000 & 390000000.000000 & 0.000000 & 60.578790 & 4066.968253 & 15193611545.235235 & 0.000000 & 12500.000000 & 0.004715 & 5083.869574 & 0.262868 & 6.270122 & 11.759796 & 2040.766084 & 12000.000000 & 32000.000000 & 58942.000000 & 262695.428000 \\
%    \end{tabular}
%\end{table}



\subsubsection{Conjunto B}
\label{ds-conjunto-b2}


\subsection{Reportes}
\subsubsection{Scores}
\textbf{Conjunto A}


%En la Tabla \ref{dcr-eco-a-scores} se muestran los resultados de los scores, donde valores más altos indican un mejor rendimiento.

\input{datasets/economicos-a-1/tables/table-score-economicos-a-1.tex}

\input{datasets/economicos-a-1/tables/table-dcr-economicos-a-1.tex}

\input{datasets/economicos-a-1/tables/table-coverage-economicos-a-1.tex}

\input{datasets/economicos-a-1/tables/table-shape-economicos-a-1.tex}


\textbf{Conjunto B}
\label{ds-conjunto-b}
